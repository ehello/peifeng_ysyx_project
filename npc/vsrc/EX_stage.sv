// Generated by CIRCT firtool-1.56.0
module EX_stage(	// @[<stdin>:1077:3]
  input         clock,	// @[<stdin>:1078:11]
                reset,	// @[<stdin>:1079:11]
                EX_IO_valid,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_dpic_bundle_id_inv_flag,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_pc_sel,	// @[playground/src/EX_stage.scala:6:12]
  input  [11:0] EX_IO_bits_csr_addr,	// @[playground/src/EX_stage.scala:6:12]
  input  [4:0]  EX_IO_bits_csr_cmd,	// @[playground/src/EX_stage.scala:6:12]
  input  [7:0]  EX_IO_bits_st_type,	// @[playground/src/EX_stage.scala:6:12]
  input  [2:0]  EX_IO_bits_ld_type,	// @[playground/src/EX_stage.scala:6:12]
  input         EX_IO_bits_ebreak_flag,	// @[playground/src/EX_stage.scala:6:12]
  input  [1:0]  EX_IO_bits_wb_sel,	// @[playground/src/EX_stage.scala:6:12]
  input  [3:0]  EX_IO_bits_br_type,	// @[playground/src/EX_stage.scala:6:12]
  input         EX_IO_bits_wen,	// @[playground/src/EX_stage.scala:6:12]
  input  [4:0]  EX_IO_bits_rd,	// @[playground/src/EX_stage.scala:6:12]
  input  [3:0]  EX_IO_bits_alu_op,	// @[playground/src/EX_stage.scala:6:12]
  input  [31:0] EX_IO_bits_src1,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_src2,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_rdata1,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_rdata2,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_nextpc,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_pc,	// @[playground/src/EX_stage.scala:6:12]
                EX_IO_bits_inst,	// @[playground/src/EX_stage.scala:6:12]
  input         EX_to_ls_ready,	// @[playground/src/EX_stage.scala:6:12]
  output        EX_IO_ready,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_valid,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_dpic_bundle_id_inv_flag,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_dpic_bundle_ex_func_flag,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_dpic_bundle_ex_is_jal,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_dpic_bundle_ex_is_ret,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_dpic_bundle_ex_is_rd0,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_pc_sel,	// @[playground/src/EX_stage.scala:6:12]
  output [11:0] EX_to_ls_bits_csr_addr,	// @[playground/src/EX_stage.scala:6:12]
  output [4:0]  EX_to_ls_bits_csr_cmd,	// @[playground/src/EX_stage.scala:6:12]
  output [7:0]  EX_to_ls_bits_st_type,	// @[playground/src/EX_stage.scala:6:12]
  output [2:0]  EX_to_ls_bits_ld_type,	// @[playground/src/EX_stage.scala:6:12]
  output        EX_to_ls_bits_ebreak_flag,	// @[playground/src/EX_stage.scala:6:12]
  output [1:0]  EX_to_ls_bits_wb_sel,	// @[playground/src/EX_stage.scala:6:12]
  output        EX_to_ls_bits_wen,	// @[playground/src/EX_stage.scala:6:12]
  output [4:0]  EX_to_ls_bits_rd,	// @[playground/src/EX_stage.scala:6:12]
  output [31:0] EX_to_ls_bits_rdata2,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_result,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_nextpc,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_pc,	// @[playground/src/EX_stage.scala:6:12]
                EX_to_ls_bits_inst,	// @[playground/src/EX_stage.scala:6:12]
  output [4:0]  EX_bypass_id_addr,	// @[playground/src/EX_stage.scala:6:12]
  output [31:0] EX_bypass_id_data,	// @[playground/src/EX_stage.scala:6:12]
  output        EX_clog_id,	// @[playground/src/EX_stage.scala:6:12]
                EX_flush_out,	// @[playground/src/EX_stage.scala:6:12]
                EX_br_bus_taken,	// @[playground/src/EX_stage.scala:6:12]
  output [31:0] EX_br_bus_target	// @[playground/src/EX_stage.scala:6:12]
);

  wire        _Br_io_taken;	// @[playground/src/EX_stage.scala:32:16]
  wire [31:0] _Alu_io_result;	// @[playground/src/EX_stage.scala:26:17]
  wire        ex_ready_go = 1'h1;	// @[playground/src/EX_stage.scala:17:33, :18:14]
  reg         ex_valid;	// @[playground/src/EX_stage.scala:16:33]
  wire        _EX_IO_ready_output = ~ex_valid | ex_ready_go & EX_to_ls_ready;	// @[playground/src/EX_stage.scala:16:33, :17:33, :19:{18,28,43}]
  wire        _EX_br_bus_taken_output = _Br_io_taken & ex_valid;	// @[playground/src/EX_stage.scala:16:33, :32:16, :37:31]
  wire        _EX_to_ls_bits_dpic_bundle_ex_is_jal_T = EX_IO_bits_br_type == 4'h7;	// @[playground/src/EX_stage.scala:75:62]
  always @(posedge clock) begin	// @[<stdin>:1078:11]
    if (reset)	// @[<stdin>:1078:11]
      ex_valid <= 1'h0;	// @[playground/src/EX_stage.scala:16:33]
    else if (_EX_IO_ready_output)	// @[playground/src/EX_stage.scala:19:28]
      ex_valid <= EX_IO_valid;	// @[playground/src/EX_stage.scala:16:33]
  end // always @(posedge)
  Alu Alu (	// @[playground/src/EX_stage.scala:26:17]
    .io_op     (EX_IO_bits_alu_op),
    .io_src1   (EX_IO_bits_src1),
    .io_src2   (EX_IO_bits_src2),
    .io_result (_Alu_io_result)
  );
  Br_cond Br (	// @[playground/src/EX_stage.scala:32:16]
    .io_br_type (EX_IO_bits_br_type),
    .io_result  (_Alu_io_result),	// @[playground/src/EX_stage.scala:26:17]
    .io_rdata1  (EX_IO_bits_rdata1),
    .io_rdata2  (EX_IO_bits_rdata2),
    .io_taken   (_Br_io_taken),
    .io_target  (EX_br_bus_target)
  );
  assign EX_IO_ready = _EX_IO_ready_output;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:19:28]
  assign EX_to_ls_valid = ex_valid & ex_ready_go;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:16:33, :17:33, :23:28]
  assign EX_to_ls_bits_dpic_bundle_id_inv_flag = EX_IO_bits_dpic_bundle_id_inv_flag;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_dpic_bundle_ex_func_flag =
    _EX_to_ls_bits_dpic_bundle_ex_is_jal_T | EX_IO_bits_br_type == 4'h8;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:75:{62,72,92}]
  assign EX_to_ls_bits_dpic_bundle_ex_is_jal = _EX_to_ls_bits_dpic_bundle_ex_is_jal_T;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:75:62]
  assign EX_to_ls_bits_dpic_bundle_ex_is_ret = EX_IO_bits_inst == 32'h8067;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:77:55]
  assign EX_to_ls_bits_dpic_bundle_ex_is_rd0 = EX_IO_bits_rd == 5'h0;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:49:25, :78:53]
  assign EX_to_ls_bits_pc_sel = EX_IO_bits_pc_sel;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_csr_addr = EX_IO_bits_csr_addr;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_csr_cmd = EX_IO_bits_csr_cmd;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_st_type = EX_IO_bits_st_type;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_ld_type = EX_IO_bits_ld_type;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_ebreak_flag = EX_IO_bits_ebreak_flag;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_wb_sel = EX_IO_bits_wb_sel;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_wen = EX_IO_bits_wen;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_rd = EX_IO_bits_rd;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_rdata2 = EX_IO_bits_rdata2;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_result = _Alu_io_result;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:26:17]
  assign EX_to_ls_bits_nextpc = EX_IO_bits_nextpc;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_pc = EX_IO_bits_pc;	// @[<stdin>:1077:3]
  assign EX_to_ls_bits_inst = EX_IO_bits_inst;	// @[<stdin>:1077:3]
  assign EX_bypass_id_addr = ex_valid & EX_IO_bits_wen ? EX_IO_bits_rd : 5'h0;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:16:33, :49:{25,35}]
  assign EX_bypass_id_data = _Alu_io_result;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:26:17]
  assign EX_clog_id = (|EX_IO_bits_ld_type) & ex_valid;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:16:33, :45:{34,41}]
  assign EX_flush_out = _EX_br_bus_taken_output & ex_valid;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:16:33, :37:31, :42:32]
  assign EX_br_bus_taken = _EX_br_bus_taken_output;	// @[<stdin>:1077:3, playground/src/EX_stage.scala:37:31]
endmodule

